<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Week 1 | 02.522: Urban Data &amp; Methods I: Computational Urban Analysis</title>
  <meta name="description" content="2 Week 1 | 02.522: Urban Data &amp; Methods I: Computational Urban Analysis" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Week 1 | 02.522: Urban Data &amp; Methods I: Computational Urban Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Week 1 | 02.522: Urban Data &amp; Methods I: Computational Urban Analysis" />
  
  
  

<meta name="author" content="Ate Poorthuis" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">02.522 Computational Urban Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Syllabus</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#class-schedule"><i class="fa fa-check"></i><b>1.1</b> Class Schedule</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i><b>1.2</b> Course Description</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#format"><i class="fa fa-check"></i><b>1.3</b> Format</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#expectations"><i class="fa fa-check"></i><b>1.4</b> Expectations</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#assessment"><i class="fa fa-check"></i><b>1.5</b> Assessment</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#assignments"><i class="fa fa-check"></i><b>1.5.1</b> Assignments</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#final-project"><i class="fa fa-check"></i><b>1.5.2</b> Final Project</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#deadlines"><i class="fa fa-check"></i><b>1.6</b> Deadlines</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>1.7</b> Software</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#detailed-outline"><i class="fa fa-check"></i><b>1.8</b> Detailed Outline</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#block-1-analysis-of-hdb-resale-prices-i"><i class="fa fa-check"></i><b>1.8.1</b> Block 1: Analysis of HDB Resale Prices I</a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#block-2-analysis-of-hdb-resale-prices-ii"><i class="fa fa-check"></i><b>1.8.2</b> Block 2: Analysis of HDB Resale Prices II</a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#block-3-geodemographics-of-sg-neighborhoods-i"><i class="fa fa-check"></i><b>1.8.3</b> Block 3: Geodemographics of SG Neighborhoods I</a></li>
<li class="chapter" data-level="1.8.4" data-path="index.html"><a href="index.html#block-4-geodemographic-of-sg-neighborhoods-ii"><i class="fa fa-check"></i><b>1.8.4</b> Block 4: Geodemographic of SG Neighborhoods II</a></li>
<li class="chapter" data-level="1.8.5" data-path="index.html"><a href="index.html#block-5-spatial-statistics"><i class="fa fa-check"></i><b>1.8.5</b> Block 5: Spatial Statistics</a></li>
<li class="chapter" data-level="1.8.6" data-path="index.html"><a href="index.html#block-6-classification"><i class="fa fa-check"></i><b>1.8.6</b> Block 6: Classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="week-1.html"><a href="week-1.html"><i class="fa fa-check"></i><b>2</b> Week 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="week-1.html"><a href="week-1.html#taking-control-of-your-repository"><i class="fa fa-check"></i><b>2.1</b> Taking control of your repository</a></li>
<li class="chapter" data-level="2.2" data-path="week-1.html"><a href="week-1.html#making-your-first-commit"><i class="fa fa-check"></i><b>2.2</b> Making your first commit</a></li>
<li class="chapter" data-level="2.3" data-path="week-1.html"><a href="week-1.html#setting-up-our-hdb-data"><i class="fa fa-check"></i><b>2.3</b> Setting up our HDB data</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">02.522: Urban Data &amp; Methods I: Computational Urban Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="week-1" class="section level1">
<h1 number="2"><span class="header-section-number">2</span> Week 1</h1>
<div id="taking-control-of-your-repository" class="section level2">
<h2 number="2.1"><span class="header-section-number">2.1</span> Taking control of your repository</h2>
<p>Our key task for this first week is to make ourselves comfortable with using git as a version control system for projects that involve data analysis. Git is a very powerful system – and many folks even use it to manage other types of projects (e.g. writing). To keep things simple, we’ll focus specifically on how git relates to our workflow with R/Rstudio for now.</p>
<p>We will start by taking possesion of the repository you will use to do your work in the context of this course. It has been set up for you already on github.com and should follow the structure <code>02522-cua/yourname</code>. For example, my repository would reside at <a href="https://github.com/02522-cua/atepoorthuis" class="uri">https://github.com/02522-cua/atepoorthuis</a>. Find your repository (here’s <a href="https://github.com/02522-cua">a list</a> of all repos in our course organization) and take note (i.e. copy it to the clipboard) of its url.</p>
<p>Start a new project in RStudio and choose to start one from version control.
<img src="images/project_vc.png" alt="project version control" />
Choose to start a project from Git and paste your github repository url in. Do make sure you store the repository somewhere sensible within your general folder organization so you can find it again.
<img src="images/git_clone.png" alt="git clone" /></p>
<p>Once you click OK, RStudio will create a new directory and will download (this is called ‘cloning’ in git parlance) the contents of your repository into it.</p>
</div>
<div id="making-your-first-commit" class="section level2">
<h2 number="2.2"><span class="header-section-number">2.2</span> Making your first commit</h2>
<p>Now that your repository has found a place on your computer, let’s practice changing some things around and see how these changes will be reflected online. There are a few specific steps involved that you need to understand (also check out <a href="http://rogerdudler.github.io/git-guide/">this decent visual summary</a>):</p>
<ol style="list-style-type: decimal">
<li>You make some actual changes. You can modify existing files and save those changes or create entirely new files.</li>
<li>After making changes, git does not actually now about them yet. We tell git about any changes by <code>add</code>ing or <code>staging</code> changed files. This sounds tedious but it is actually very handy when you’re experimenting and don’t necessarily want your half-baked experiment to be sent to the online repository.</li>
<li>Once you are happy with your changes, you can make a <code>commit</code> of all the staged changes up until that moment. I like to think of this is a milestone. You say: ‘<em>these are my changes, please check them in</em>’. This is also reflected by the fact that every <code>commit</code> is accompanied by a commit message that summarizes those changes. We generally keep these messages short so they’re easier to read later.</li>
<li>After commiting, the changes only still exist on our local computer. We can finally <code>push</code> our changes up to Github.com.</li>
</ol>
<p>Time for practice. Open the README.md file in the ‘root’ of your project. The current description is a bit generic so let’s personalize. I changed mine to:</p>
<pre><code># Computational Urban Analysis Repository of Ate Poorthuis

This repo will hold all my lab work and assignments.</code></pre>
<p>Save your change and go to the <code>Git</code> pane (usually in the right-hand side of your RStudio window). You should see your README.md file show up there now. If it does, click the <code>Diff</code> or <code>Commit</code> button. This will open up another window, in which we can do all of our next steps.</p>
<ul>
<li>First we need to <code>stage</code> our changes. Hit the tick-box in front of README.md. (If the <code>.proj</code> file shows up, we can stage that too)</li>
<li>Next we need to <code>commit</code> our staged changes. Write a short commit message describing your change and hit the Commit button.</li>
</ul>
<p><img src="images/commit.png" /></p>
<p>Now we have commited our changes <em>locally</em> but this is not yet reflected on github.com. We can <code>push</code> the state of our repository up to github.com. You will notice a message on the top-left of the git window indicating ‘Your branch is 1 commit ahead of origin/master’. <code>Origin</code> is git parlance for the online version of our repository. To bring <code>origin</code> back into sync with our local version, just press ‘Push’ and go to your repository on github.com to see the changes. Congratulations you are now a budding git ninja!</p>
</div>
<div id="setting-up-our-hdb-data" class="section level2">
<h2 number="2.3"><span class="header-section-number">2.3</span> Setting up our HDB data</h2>
<p>Now that you have properly taken control of your repository, it is time to start setting up our data for subsequent analysis. The task at hand is to analyze HDB resale prices – we will start next week with univariate statistics (i.e. analyzing single variables in isolation), after which we will move to multivariate statistics (i.e. looking at the relation between multiple variables). For now, we are just going to set up shop: read and clean our dataset using a series of <code>tidyverse</code> operations.</p>
<p>Create a new R Notebook and save it with an appropriate name in your <code>lab-practice</code> folder. Use the R Notebook to follow along and experiment with the dataset. Do not just copy the instructions below but type them by hand instead. Also note that it is your responsibility to make sure any of the libraries used below (as recognized from them being loaded with <code>library</code>) are actually installed (with <code>install.packages</code>).</p>
<p>You can find a data of resale transactions going back to 1990 on the <a href="https://data.gov.sg/dataset/resale-flat-prices">data.gov.sg</a> website. For now, we will just consider the data from 2015-now so you can download this data set directly from <a href="https://www.dropbox.com/s/xorwcqe4h7d1u7q/resale-flat-prices-based-on-registration-date-from-jan-2015-onwards.csv?dl=1" class="uri">https://www.dropbox.com/s/xorwcqe4h7d1u7q/resale-flat-prices-based-on-registration-date-from-jan-2015-onwards.csv?dl=1</a>.</p>
<p>As we will use this data across several blocks, you should create a <code>data/</code> folder at the root of your project to hold this data.</p>
<p>A short note on the <code>here</code> package. Rmarkdown documents are always executed in the context of your their current directory. Move a document all of the sudden it might not be able to find the files it’s using anymore! This is why we use <code>here</code>: it will always point to the root of our project folder.</p>
<p>Once the data is saved, let’s read it in.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="week-1.html#cb2-1"></a>sales &lt;-<span class="st"> </span><span class="kw">read_csv</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data/hdb_resale_2015_onwards.csv&quot;</span>))</span></code></pre></div>
<p>Use <code>glimpse()</code> and <code>View()</code> to inspect the resulting tibble. As you’ll see the data is relatively clean.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="week-1.html#cb3-1"></a>sales <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## Observations: 79,100
## Variables: 11
## $ month               &lt;chr&gt; &quot;2015-01&quot;, &quot;2015-01&quot;, &quot;2015-01&quot;, &quot;2015-01&quot;, &quot;2015…
## $ town                &lt;chr&gt; &quot;ANG MO KIO&quot;, &quot;ANG MO KIO&quot;, &quot;ANG MO KIO&quot;, &quot;ANG MO…
## $ flat_type           &lt;chr&gt; &quot;3 ROOM&quot;, &quot;3 ROOM&quot;, &quot;3 ROOM&quot;, &quot;3 ROOM&quot;, &quot;3 ROOM&quot;,…
## $ block               &lt;chr&gt; &quot;174&quot;, &quot;541&quot;, &quot;163&quot;, &quot;446&quot;, &quot;557&quot;, &quot;603&quot;, &quot;709&quot;, …
## $ street_name         &lt;chr&gt; &quot;ANG MO KIO AVE 4&quot;, &quot;ANG MO KIO AVE 10&quot;, &quot;ANG MO …
## $ storey_range        &lt;chr&gt; &quot;07 TO 09&quot;, &quot;01 TO 03&quot;, &quot;01 TO 03&quot;, &quot;01 TO 03&quot;, &quot;…
## $ floor_area_sqm      &lt;dbl&gt; 60, 68, 69, 68, 68, 67, 68, 68, 67, 68, 67, 68, 6…
## $ flat_model          &lt;chr&gt; &quot;Improved&quot;, &quot;New Generation&quot;, &quot;New Generation&quot;, &quot;…
## $ lease_commence_date &lt;dbl&gt; 1986, 1981, 1980, 1979, 1980, 1980, 1980, 1981, 1…
## $ remaining_lease     &lt;dbl&gt; 70, 65, 64, 63, 64, 64, 64, 65, 62, 69, 60, 64, 6…
## $ resale_price        &lt;dbl&gt; 255000, 275000, 285000, 290000, 290000, 290000, 2…</code></pre>
<p>There are just a few adjustments we need to make.</p>
<ul>
<li><code>month</code> should probably be converted to a date</li>
<li><code>flat_type</code>, <code>storey_range</code> and <code>flat_model</code> are currently <code>chr</code> columns but can better be represented as <code>factor</code> variables as they are categorical variables.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="week-1.html#cb5-1"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb5-2"><a href="week-1.html#cb5-2"></a><span class="kw">library</span>(forcats)</span>
<span id="cb5-3"><a href="week-1.html#cb5-3"></a></span>
<span id="cb5-4"><a href="week-1.html#cb5-4"></a>sales <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-5"><a href="week-1.html#cb5-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">month =</span> <span class="kw">ymd</span>(month, <span class="dt">truncated =</span> <span class="dv">1</span>),</span>
<span id="cb5-6"><a href="week-1.html#cb5-6"></a>         <span class="dt">flat_type =</span> <span class="kw">as_factor</span>(flat_type),</span>
<span id="cb5-7"><a href="week-1.html#cb5-7"></a>         <span class="dt">storey_range =</span> <span class="kw">as_factor</span>(storey_range),</span>
<span id="cb5-8"><a href="week-1.html#cb5-8"></a>         <span class="dt">flat_model =</span> <span class="kw">as_factor</span>(flat_model))</span></code></pre></div>
<pre><code>## # A tibble: 79,100 x 11
##    month      town  flat_type block street_name storey_range floor_area_sqm
##    &lt;date&gt;     &lt;chr&gt; &lt;fct&gt;     &lt;chr&gt; &lt;chr&gt;       &lt;fct&gt;                 &lt;dbl&gt;
##  1 2015-01-01 ANG … 3 ROOM    174   ANG MO KIO… 07 TO 09                 60
##  2 2015-01-01 ANG … 3 ROOM    541   ANG MO KIO… 01 TO 03                 68
##  3 2015-01-01 ANG … 3 ROOM    163   ANG MO KIO… 01 TO 03                 69
##  4 2015-01-01 ANG … 3 ROOM    446   ANG MO KIO… 01 TO 03                 68
##  5 2015-01-01 ANG … 3 ROOM    557   ANG MO KIO… 07 TO 09                 68
##  6 2015-01-01 ANG … 3 ROOM    603   ANG MO KIO… 07 TO 09                 67
##  7 2015-01-01 ANG … 3 ROOM    709   ANG MO KIO… 01 TO 03                 68
##  8 2015-01-01 ANG … 3 ROOM    333   ANG MO KIO… 01 TO 03                 68
##  9 2015-01-01 ANG … 3 ROOM    109   ANG MO KIO… 01 TO 03                 67
## 10 2015-01-01 ANG … 3 ROOM    564   ANG MO KIO… 13 TO 15                 68
## # … with 79,090 more rows, and 4 more variables: flat_model &lt;fct&gt;,
## #   lease_commence_date &lt;dbl&gt;, remaining_lease &lt;dbl&gt;, resale_price &lt;dbl&gt;</code></pre>
<p>Now it is time to get our cheatsheets out. Last term we gained experience with a suite of <code>tidyverse</code> staples to manipulate tables in different ways. The most important of these are probably <code>filter</code>, <code>arrange</code>, <code>group_by</code>, and <code>summarize</code>.</p>
<p>Try to put these to practice to answer the following questions:</p>
<ul>
<li>What is the earlier lease commencement date and where are these flats located?</li>
<li>What are the largest HDB flats in Singapore? How much did they sell for?</li>
<li>What is the most expensive flat in Punggol?</li>
<li>Which town has, on average, the largest flats (by floor area)?</li>
<li>Which town has, on average, the cheapest flats per square meter?</li>
</ul>
<p>Answer each of these questions in a separate code chunk. When you are finished, save your RMarkdown document. You’re now ready to make your first ‘real’ commit.</p>
<p><img src="images/final_commit.png" /></p>
<p>Walk through these steps – <code>stage</code> your changes, <code>commit</code> the staged changes (with an appropriate commit message), and finally <code>push</code> your local commits up to the repository on github.com.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["lecturenotes.pdf", "lecturenotes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
